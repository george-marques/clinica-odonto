<!DOCTYPE html>
<html lang="pt-br" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui">
<h:head>

	<link
		href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
		rel="stylesheet"
		integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
		crossorigin="anonymous" />

	<title>Listagem de Consulta</title>
</h:head>

<h:body>
	<h:form>
		<h:panelGrid id="panelDataTable">
			<p:dataTable id="dt-consultas" widgetVar="dtConsultas" reflow="true"
				styleClass="consultas-table" rowKey="#{obj.id}"
				value="#{consultaListing.list}" paginator="true" rows="3"
				rowSelectMode="add" paginatorPosition="bottom" var="obj">

				<f:facet name="header">
					<div class="consultas-table-header">
						<span class="filter-container ui-input-icon-left"> <p:commandButton value="Verificar agenda"
								icon="pi pi-search" styleClass="ui-button-warning"
								actionListener="#{consultaListing.pesquisar}" process="@this"
								update="dt-consultas" />



						</span>

					</div>
				</f:facet>



				<p:column headerText="Código" sortBy="#{obj.id}">
					<p:outputLabel value="#{obj.id}" />

				</p:column>


				<p:column headerText="Data" sortBy="#{obj.dataAgendamento}">
					<p:outputLabel value="#{obj.dataAgendamento}">
						<f:convertDateTime type="localDateTime" pattern="dd/MM/yyyy HH:mm" />

					</p:outputLabel>
				</p:column>

				<p:column headerText="Paciente">
					<p:outputLabel value="#{obj.paciente.pessoaFisica.nome}" />

				</p:column>
				
				<p:column headerText="Cartão SUS">
					<p:outputLabel value="#{obj.paciente.cartaoSus}" />

				</p:column>
				
				<p:column headerText="CPF">
					<p:outputLabel value="#{obj.paciente.pessoaFisica.cpf}" />


				</p:column>

				<p:column headerText="Dentista">
					<p:outputLabel value="#{obj.dentista.nome}" />


				</p:column>


				<p:column headerText="Ação" exportable="false">
					<p:commandButton value="Selecionar"
						actionListener="#{consultaListing.select(obj.id)}"
						icon="pi pi-pencil" process="@this" update="@form"
						styleClass="edit-button rounded-button ">


					</p:commandButton>

				</p:column>
			</p:dataTable>
		</h:panelGrid>

	</h:form>
</h:body>
</html>